#################################################################################################################
#############################              Device Tracker Notifications             #############################
#################################################################################################################
########################################              Lizz             ##########################################
#################################################################################################################

  - alias: Lizz's Birthday # A once a year boost to the WAF factor
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: time
        at: '11:00:00'
    condition:
      condition: and
      conditions:
        - condition: template
          value_template: '{{ now().month == 5 }}' # Change the number here to get whatever day of the month you want.
        - condition: template
          value_template: "{{ now().day == 4 }}" # Change the number here to get whatever day of the month you want.
    action:
      - service: notify.alexa_media
        data:
          target:
            - media_player.livingroom_alexa
            - media_player.bedroom_alexa
            - media_player.office_alexa
            # - media_player.zach_alexa
            - media_player.basement_alexa
          data:
            type: announce
          message: "Happy Birthday to you,... Happy Birthday to you,... Happy Birthday to elizabeth,...  Happy Birthday to you"
      - service: notify.lizzs_iphone_6s
        data:
          title: "HAPPY FUCKING BIRTHDAY!!!!!!!!!!!!!!!"
          message: "I LOVE YOU SO MUCH! Happy Birthday to the most wonderful woman I have ever met!"

  # - alias: 'Where is Lizz' # I get way too many notifications from this
  #   initial_state: yes
  #   hide_entity: yes
  #   trigger:
  #     - platform: state
  #       entity_id: device_tracker.lizzs_iphone_6s
  #   action:
  #     - service: notify.ios_skidata_iphone_7_plus
  #       data_template:
  #         message: >
  #           {% if is_state('device_tracker.lizzs_iphone_6s', 'home') %}
  #             Your beautiful Wife is home!!!!!!!!
  #           {% else %}
  #             Lizz is at {{ states('device_tracker.lizzs_iphone_6s') }}.
  #           {% endif %}

  - alias: 'Lizz Near Home!!!'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: zone
        event: enter
        zone: zone.near_home
        entity_id: device_tracker.lizzs_iphone_6s
    action:
      - service: notify.alexa_media
        data:
          target:
            - media_player.livingroom_alexa
            - media_player.bedroom_alexa
            - media_player.office_alexa
            # - media_player.zach_alexa
            - media_player.basement_alexa
          data:
            type: tts
          message: "Chris!... Your sexy wife is almost home!"

  - alias: 'Welcome Home Lizz!!!'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: zone
        event: enter
        zone: zone.home
        entity_id: device_tracker.lizzs_iphone_6s
    action:
      - service: notify.ios_skidata_iphone_7_plus
        data:
          title: 'Hey Chris!'
          message: 'Your beautiful Wife is home!!!!!!!!'
      - service: notify.alexa_media
        data:
          target:
            - media_player.livingroom_alexa
            - media_player.bedroom_alexa
            - media_player.office_alexa
            # - media_player.zach_alexa
            - media_player.basement_alexa
          data:
            type: tts
          message: "Oh my Goodness Chris!... Your sexy  wife is home!"
      # - service: notify.ios_lizzs_iphone_6s
        # data:
          # title: "Welcome Home LizzyPoo!"
          # message: "I Love You! Swipe down!"
          # data:
            # push:
              # badge: 0
              # category: 'welcomehome'

#################################################################################################################
########################################              Zach             ##########################################
#################################################################################################################

  - alias: 'Welcome Home Zach'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: state
        entity_id: device_tracker.zach_iphone
        from: 'not_home'
        to: 'home'
    action:
      - service: notify.ios_skidata_iphone_7_plus
        data:
          title: 'Hey Chris!'
          message: 'Zach is now home'
      - service: notify.ios_zach_iphone
        data:
          title: 'Hello Zachary!'
          message: 'WELCOME HOME FUCKER!!!!!'

  - alias: 'Zach Near Home!!!'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: zone
        event: enter
        zone: zone.near_home
        entity_id: device_tracker.zach_iphone
    action:
      - service: notify.ios_skidata_iphone_7_plus
        data:
          title: 'Hey Chris!'
          message: 'Zach is almost home'

  - alias: 'Goodbye Zach'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: state
        entity_id: device_tracker.zach_iphone
        from: 'home'
        to: 'not_home'
    action:
      - service: notify.ios_skidata_iphone_7_plus
        data:
          title: 'Hey Chris!'
          message: 'Zach has left home'
      - service: notify.ios_zach_iphone
        data:
          title: 'BYE BYE Zach!'
          message: 'SEE YOU LATER FUCKER!!!!!'

  # - alias: 'Where is Zach' # I get way too many notifications from this
  #   initial_state: yes
  #   hide_entity: yes
  #   trigger:
  #     - platform: state
  #       entity_id: device_tracker.lizzs_iphone_6s
  #   action:
  #     - service: notify.ios_skidata_iphone_7_plus
  #       data_template:
  #         message: >
  #           {% if is_state('device_tracker.zach_iphone', 'home') %}
  #             Zach is now home!!!
  #           {% else %}
  #             Zach is at {{ states('device_tracker.zach_iphone') }}.
  #           {% endif %}

  # - alias: fuckin with zach
  #   trigger:
  #     - platform: state
  #       entity_id: device_tracker.zach_iphone
  #       to: 'home'
  #       for:
  #         minutes: 7
  #   action: 
  #     - service: media_player.alexa_tts
  #       data:
  #         entity_id: media_player.livingroom_alexa
  #         message: "Welcome Home Zachary,... please say the password to disable the home security system... If the correct password is not said in 10 second the police will be notified... 10... 9... 8... 7... 6... 5... 4... 3... 2... 2 2 2 2... 3... 2... hahahahahahahahahaha fukker... i'm just fukking with you... you little bitsh"


###################################################################################################
########################                Presence Automations               ########################
###################################################################################################


  - alias: "Lights out, Nobody's home"
    trigger:
      - platform: state
        entity_id: binary_sensor.people_home
        from: 'on'
        to: 'off'
        for:
          minutes: 15
    action:
      - service: light.turn_off
        data:
          entity_id: group.all_lights
      - service: notify.ios_skidata_iphone_7_plus
        data:
          message: 'Nobody is home! Lights out!'
   # - service: switch.turn_off
     # entity_id: group.all_switches #dont forget the fridge is on POW!

  - alias: 'Turn on Computer when chris is home'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: state
        entity_id: device_tracker.skidata_iphone_7_plus
        from: 'not_home'
        to: 'home'
    action:
      - service: switch.turn_on
        entity_id: switch.office_computer
      - service: notify.ios_skidata_iphone_7_plus
        data:
          title: 'Battlestation Initialized'
          message: 'Welcome home! Prepare to dominate the interwebs!'

  - alias: 'Turn off Computer when chris is not home'
    initial_state: yes
    hide_entity: yes
    trigger:
      - platform: state
        entity_id: device_tracker.skidata_iphone_7_plus
        from: 'home'
        to: 'not_home'
    action:
      - service: notify.ios_skidata_iphone_7_plus
        data:
          title: 'Battlestation Deactivating'
          message: 'Have a great day, your battlestation has been shutdown. It patiently awaits your return.'
      - service: switch.turn_off
        entity_id: switch.office_computer

  # - alias: 'Battlestation Activated'
  #   initial_state: yes
  #   hide_entity: yes
  #   trigger:
  #     - platform: state
  #       entity_id: device_tracker.office_computer
  #       from: 'off'
  #       to: 'on'
  #     - service: notify.ios_skidata_iphone_7_plus
  #       data:
  #         title: 'Battlestation Activated'
  #         message: 'Battlestation is Online!'

  # - alias: 'Battlestation Deactivated'
  #   initial_state: yes
  #   hide_entity: yes
  #   trigger:
  #     - platform: state
  #       entity_id: device_tracker.office_computer
  #       from: 'on'
  #       to: 'off'
  #     - service: notify.ios_skidata_iphone_7_plus
  #       data:
  #         title: 'Battlestation Deactivated'
  #         message: 'Battlestation is Offline!'